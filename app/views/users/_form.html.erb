<%= form_for((user), html: { class: "form-horizontal" }) do |f| %>
      <%= render 'shared/error_messages', object: f.object %>
      <h4>プロフィール</h4>
      <div class="form-group">
      <%= f.label :"名前", class: 'col-md-2 control-label' %>
      <%= f.text_field :name, class: 'col-md-10' %>
      </div>
      <div class="form-group">
      <%= f.label :"紹介文", class: 'col-md-2 control-label'%>
      <%= f.text_area :introduction, class: 'col-md-10', rows: 5 %>
      </div>
      <div class="form-group">
      <%= f.label :"アップロード", class: 'col-md-2 control-label'%>
      <%= f.file_field :image, id: :profile_img %>
      <%= image_tag @user.image.url, id: :img_prev, class: :"profile-img" if @user.image? %>
      </div>
      <div class="form-group">
      <%= f.submit yield(:button_text), class: "btn btn-primary profile-button" %>
      </div>
<% end %>

<script type="text/javascript">
$(function() {
 function readURL(input) {
   if (input.files && input.files[0]) {
     var reader = new FileReader();
     reader.onload = function (e) {
       $('#img_prev').attr('src', e.target.result);
     }
     reader.readAsDataURL(input.files[0]);
   }
 }
 $("#profile_img").change(function(){
   readURL(this);
 });
});
</script>